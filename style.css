/* =====================================================
   PARALLAX CSS SKELETON
   CSS handles layout, layers, and motion
===================================================== */


/* -----------------------------------------------------
   1. ROOT VARIABLES
   Central place for tuning motion globally
----------------------------------------------------- */

:root {
  --scroll-y: 0;          /* updated by JS */
  --parallax-max: 200px;  /* safety cap */
}


/* -----------------------------------------------------
   2. BASE RESET (important for smooth scrolling)
----------------------------------------------------- */

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  overflow-x: hidden; /* prevent sideways drift */
}


/* -----------------------------------------------------
   3. PARALLAX SECTION
   Creates a positioning context for layers
----------------------------------------------------- */

.parallax-section {
  position: relative;
  height: 100vh;
  overflow: hidden;
}


/* -----------------------------------------------------
   4. PARALLAX LAYERS (the moving parts)
----------------------------------------------------- */

.parallax-layer {
  position: absolute;
  inset: 0;
  will-change: transform;

  /* The parallax math lives here */
  transform: translate3d(
    0,
    clamp(
      calc(var(--scroll-y) * var(--speed)),
      calc(var(--parallax-max) * -1),
      var(--parallax-max)
    ),
    0
  );
}


/* Images behave better this way */
.parallax-layer img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}


/* -----------------------------------------------------
   5. LAYER DEPTH (z-ordering)
----------------------------------------------------- */

.layer-back {
  z-index: 1;
}

.layer-mid {
  z-index: 2;
}


/* -----------------------------------------------------
   6. CONTENT LAYER (no parallax)
   Always readable, always stable
----------------------------------------------------- */

.parallax-content {
  position: relative;
  z-index: 3;
  padding: 4rem;
  color: white;
}


/* -----------------------------------------------------
   7. ACCESSIBILITY
   Respect reduced motion preferences
----------------------------------------------------- */

@media (prefers-reduced-motion: reduce) {
  .parallax-layer {
    transform: none !important;
  }
}



/* =====================================================
PARALLAX SECTION (CONTAINER)
Purpose:
- Establishes relative positioning
- Controls visible area of parallax

Key properties:
- position: relative
- overflow: hidden
===================================================== */
.parallax-section {
  position: relative;
  height: 100vh;
  overflow: hidden;
}

/* =====================================================
PARALLAX LAYER (MOVING ELEMENT)
Purpose:
- Layer that visually moves on scroll
- Positioned independently of content

Performance:
- Always animate with transform
- Avoid layout properties
===================================================== */
.parallax-layer {
  position: absolute;
  inset: 0;
  will-change: transform;
}

/* =====================================================
SCROLL-DRIVEN TRANSFORM
Purpose:
- Creates parallax motion using CSS variables

Notes:
- --scroll-y is usually set via JS
- --speed controls depth per layer
- clamp() prevents runaway movement
===================================================== */
transform: translate3d(
  0,
  clamp(
    calc(var(--scroll-y) * var(--speed)),
    -200px,
    200px
  ),
  0
);

/* =====================================================
DEPTH & STACKING
Purpose:
- Controls which layers appear closer/farther

Rule:
- Lower z-index = farther away
===================================================== */
.layer-back { z-index: 1; }
.layer-mid  { z-index: 2; }
.layer-front{ z-index: 3; }

/* =====================================================
ACCESSIBILITY: REDUCED MOTION
Purpose:
- Disables parallax for users who request it

Rule:
- Always include this block
===================================================== */
@media (prefers-reduced-motion: reduce) {
  .parallax-layer {
    transform: none !important;
  }
}

